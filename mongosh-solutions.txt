1.
db.createCollection('books', {
        validator: {
            $jsonSchema: {
                bsonType: 'object',
                required: ['title'],
                properties: {
                    title: {
                        bsonType: 'string',
                        minLength: 1,
                        description: 'title is required and must be a string',
                    }
                }
            }
        },
        validationAction: 'error',
        validationLevel: 'strict',
    }
)

---------------------------------------------------------------------------------------
2.
db.authors.insertOne({
  name:"youssef",
  nationality:"egyptian"
})

---------------------------------------------------------------------------------------
3.
db.createCollection('logs', {
        capped: true,
        size: 1024 * 1024,
    }
)

---------------------------------------------------------------------------------------
4.
db.books.createIndex({ title: 1 }, { unique: true })

---------------------------------------------------------------------------------------
5.
db.books.insertOne(
    {
        title:"book4",
        author:"youssef",
        year:1942,
        genres:["fantacy","adventure"]
    }
)

---------------------------------------------------------------------------------------
6.
db.books.insertMany(
    [
        {
            title:"book5",
            author:"youssef",
            year:1942,
            genres:["fantacy","adventure"]
        },
        {
            title:"book6",
            author:"youssef",
            year:1942,
            genres:["fantacy","adventure"]
        },
    ]
)

---------------------------------------------------------------------------------------
7.
db.logs.insertOne(
    {
        book_id:ObjectId('69872d74c715f9696c98dc58'),
        action:"borrowed"
    }
)

---------------------------------------------------------------------------------------
8.
db.books.updateOne({ title:future }, { $set: { year: 2022 } })

---------------------------------------------------------------------------------------
9.
db.books.findOne({ title:"Brave New World" })

---------------------------------------------------------------------------------------
10.
db.books.find({ year: { $gte: 1990, $lte: 2010 } })

---------------------------------------------------------------------------------------
11.
db.books.find({ genres: { $in: ["Science Fiction"] } })

---------------------------------------------------------------------------------------
12.
db.books.find().skip(2).limit(3).sort({ year: -1 })

---------------------------------------------------------------------------------------
13.
db.books.find({ year: { $type: 'int' } })

---------------------------------------------------------------------------------------
14.
db.books.find({ genres: { $nin: ["Science Fiction"] } })

---------------------------------------------------------------------------------------
15.
db.books.deleteMany({ year: { $lt: 2000 } })

---------------------------------------------------------------------------------------
16.
db.books.aggregate(
    [
        {
            $match: { year: { $gt: 2000 } }
        },
        {
            $sort: { year: -1 }
        }
    ]
)

---------------------------------------------------------------------------------------
17.
db.books.aggregate(
    [
        {
            $match: { year: { $gt: 2000 } }
        },
        {
            $project: {
                title: 1,
                author: 1,
                year: 1
            }
        }
    ]
)

---------------------------------------------------------------------------------------
18.
db.books.aggregate(
    [
        {
            $unwind: '$genres'
        }
    ]
)

---------------------------------------------------------------------------------------
19.
db.logs.aggregate(
    [
        {
            $lookup: {
                from: 'books',
                localField: 'book_id',
                foreignField: '_id',
                as: 'book'
            }
        }
    ]
)